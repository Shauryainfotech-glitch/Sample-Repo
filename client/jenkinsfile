pipeline {
    agent any

    tools {
        nodejs 'Node18'  
    }

    stages {
        stage('Checkout Code') {
            steps {
                echo "Cloning repository"
                git url: 'https://github.com/Shauryainfotech-glitch/Sample-Repo.git', branch: 'master'
            }
        }

        stage('Setup Node.js') {
            steps {
                echo "Checking Node and npm versions"
                sh 'node -v'
                sh 'npm -v'
            }
        }

        stage('Build Frontend') {
    steps {
        echo "Installing frontend dependencies and building"
        dir('client') {
            sh 'npm install'
            sh 'CI=false npm run build'
        }
    }
}

        stage('Archive Frontend Build Artifacts') {
            steps {
                echo "Archiving frontend build artifacts"
                archiveArtifacts artifacts: "client/build/**/*", fingerprint: true
            }
        }
    }

    post {
        success {
            echo "Pipeline completed successfully"
        }
        failure {
            echo "Pipeline failed! Check logs for details"
        }
        always {
            echo "Cleaning up"
        }
    }
}
